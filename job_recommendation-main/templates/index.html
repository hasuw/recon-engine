<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>AI-Powered Job Recommender for India</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <!-- Add mobile-specific meta tags -->
    <meta name="theme-color" content="#ff9933">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
</head>
<body>
    <!-- Header Section -->
    <header class="app-header">
        <div class="container py-3 py-md-4">
            <div class="row align-items-center">
                <div class="col-lg-6 col-md-12 mb-3 mb-lg-0 text-center text-lg-start">
                    <h1 class="app-title">AI-Powered Job Recommender for India</h1>
                    <p class="app-tagline mt-2">Find the right opportunity faster with AI</p>
                </div>
            </div>
        </div>
    </header>

    <div class="container mt-4 mt-md-5">
        <div class="row justify-content-center">
            <div class="col-lg-8 col-md-10 col-sm-12">
                <div class="card shadow">
                    <div class="card-header bg-white text-center py-3">
                        <h2 class="h4 mb-0">Upload Your Resume</h2>
                    </div>
                    <div class="card-body p-3 p-md-4">
                        {% if error %}
                        <div class="alert alert-danger" role="alert">
                            {{ error }}
                        </div>
                        {% endif %}
                        
                        <p class="text-center mb-4">Get personalized job recommendations tailored to your skills and experience</p>
                        
                        <form action="/upload" method="post" enctype="multipart/form-data" class="mb-4">
                            <div class="mb-4">
                                <label for="file" class="form-label">Upload Resume (PDF or TXT)</label>
                                <div class="upload-area" id="upload-area">
                                    <i class="fas fa-file-upload fs-2 mb-2 text-muted"></i>
                                    <p class="mb-1 upload-text">Drag and drop your resume here</p>
                                    <p class="text-muted small">or</p>
                                    <input type="file" class="form-control" id="file" name="file" accept=".pdf,.txt" required style="display: none;">
                                    <button type="button" class="btn btn-outline-primary btn-sm" id="browse-btn">Browse Files</button>
                                    <p class="selected-file mt-2 small text-muted" id="selected-file"></p>
                                </div>
                                <div class="form-text">Maximum file size: 16MB</div>
                            </div>

                            <div class="mb-4">
                                <label for="job_domain" class="form-label">Select Job Domain</label>
                                <select class="form-select" id="job_domain" name="job_domain" required>
                                    <option value="" selected disabled>Choose a job domain</option>
                                    <option value="software_engineer">Software Engineer</option>
                                    <option value="data_scientist">Data Scientist</option>
                                    <option value="web_developer">Web Developer</option>
                                    <option value="mobile_developer">Mobile App Developer</option>
                                    <option value="ui_ux_designer">UI/UX Designer</option>
                                    <option value="product_manager">Product Manager</option>
                                    <option value="finance">Finance</option>
                                    <option value="marketing">Marketing</option>
                                    <option value="sales">Sales</option>
                                    <option value="hr">Human Resources</option>
                                    <option value="operations">Operations</option>
                                </select>
                            </div>

                            <div class="d-grid gap-2">
                                <button type="submit" class="btn btn-primary btn-lg">
                                    <i class="fas fa-search me-2"></i>Get Recommendations
                                </button>
                            </div>
                        </form>
                        
                        <div class="text-center mt-4 pt-3 border-top">
                            <h5>API Access</h5>
                            <p>Access our recommendation API at <code>/api/recommend</code></p>
                            <pre class="bg-light p-3 text-start rounded"><code>curl -X POST -F "file=@resume.pdf" -F "job_domain=software_engineer" http://localhost:8080/api/recommend</code></pre>
                        </div>
                    </div>
                </div>

                <!-- Sample Companies Section -->
                <div class="mt-4 mt-md-5">
                    <h3 class="text-center mb-3 mb-md-4">Trusted by Top Indian Companies</h3>
                    <div class="row row-cols-2 row-cols-md-4 g-3 justify-content-center">
                        <div class="col text-center">
                            <div class="p-2 p-md-3 bg-white rounded shadow-sm">Infosys</div>
                        </div>
                        <div class="col text-center">
                            <div class="p-2 p-md-3 bg-white rounded shadow-sm">TCS</div>
                        </div>
                        <div class="col text-center">
                            <div class="p-2 p-md-3 bg-white rounded shadow-sm">Wipro</div>
                        </div>
                        <div class="col text-center">
                            <div class="p-2 p-md-3 bg-white rounded shadow-sm">Reliance</div>
                        </div>
                        <div class="col text-center">
                            <div class="p-2 p-md-3 bg-white rounded shadow-sm">Paytm</div>
                        </div>
                        <div class="col text-center">
                            <div class="p-2 p-md-3 bg-white rounded shadow-sm">Zomato</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="app-footer mt-4 mt-md-5 py-3">
        <div class="container text-center">
            <p class="small mb-0">© 2023 AI-Powered Job Recommender for India</p>
            <p class="small mb-0">Made with ❤️ in India</p>
        </div>
    </footer>
    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // File upload interaction
        document.addEventListener('DOMContentLoaded', function() {
            const uploadArea = document.getElementById('upload-area');
            const fileInput = document.getElementById('file');
            const browseBtn = document.getElementById('browse-btn');
            const selectedFile = document.getElementById('selected-file');
            
            browseBtn.addEventListener('click', function() {
                fileInput.click();
            });
            
            fileInput.addEventListener('change', function() {
                if (fileInput.files.length > 0) {
                    selectedFile.textContent = fileInput.files[0].name;
                }
            });
            
            // Drag and drop functionality
            uploadArea.addEventListener('dragover', function(e) {
                e.preventDefault();
                uploadArea.classList.add('dragover');
            });
            
            uploadArea.addEventListener('dragleave', function() {
                uploadArea.classList.remove('dragover');
            });
            
            uploadArea.addEventListener('drop', function(e) {
                e.preventDefault();
                uploadArea.classList.remove('dragover');
                
                if (e.dataTransfer.files.length > 0) {
                    fileInput.files = e.dataTransfer.files;
                    selectedFile.textContent = e.dataTransfer.files[0].name;
                }
            });
            
            // Add viewport height fix for mobile browsers
            function setVH() {
                let vh = window.innerHeight * 0.01;
                document.documentElement.style.setProperty('--vh', `${vh}px`);
            }
            
            window.addEventListener('resize', setVH);
            window.addEventListener('orientationchange', setVH);
            setVH();
            
            // Improve mobile form submission
            document.querySelector('form').addEventListener('submit', function() {
                // Disable submit button to prevent double submission
                const submitBtn = this.querySelector('button[type="submit"]');
                if (submitBtn) {
                    submitBtn.disabled = true;
                    submitBtn.innerHTML = '<span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span> Processing...';
                }
            });
        });
    </script>
</body>
</html>